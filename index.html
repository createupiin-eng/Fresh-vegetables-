<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fresh Vegetable Market | Login</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { 
        --bg-dark: #050b14;
        --glass: rgba(255, 255, 255, 0.08); /* Thoda lighter glass */
        --border: rgba(255, 255, 255, 0.15);
        --primary: #00e38e;
        --secondary: #7cffb2;
        --text-main: #ffffff;
        --text-muted: #b8c7c0;
        --danger: #ff6b6b;
    }

    * { box-sizing: border-box; user-select: none; -webkit-user-drag: none; }

    body { 
        margin: 0; 
        font-family: 'Poppins', sans-serif; 
        background-color: var(--bg-dark);
        /* High Quality Dark Gradient Background */
        background: radial-gradient(circle at 10% 20%, rgb(15, 32, 39) 0%, rgb(32, 58, 67) 90%);
        min-height: 100vh; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        padding: 20px;
        overflow: hidden;
        position: relative;
    }

    /* === ANIMATED BACKGROUND VEGETABLES (SVG) === */
    .floating-veggies { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
    
    .veg-svg {
        position: absolute;
        width: 80px;
        height: 80px;
        opacity: 0.15;
        filter: drop-shadow(0 0 10px rgba(0, 227, 142, 0.3));
        animation: floatAnim linear infinite;
    }

    /* Random Positions & Speeds */
    .v1 { top: 10%; left: 10%; animation-duration: 15s; width: 100px; }
    .v2 { top: 60%; left: 5%; animation-duration: 20s; animation-delay: -2s; width: 70px; }
    .v3 { top: 20%; right: 15%; animation-duration: 18s; animation-delay: -5s; width: 90px; }
    .v4 { bottom: 10%; right: 5%; animation-duration: 22s; animation-delay: -8s; width: 110px; }
    .v5 { bottom: 20%; left: 40%; animation-duration: 25s; width: 60px; opacity: 0.1; }

    @keyframes floatAnim {
        0% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-40px) rotate(10deg); }
        100% { transform: translateY(0) rotate(0deg); }
    }

    /* === MAIN LAYOUT === */
    .container { 
        position: relative; 
        z-index: 10; 
        width: 100%; 
        max-width: 950px; 
        display: grid; 
        grid-template-columns: 1.2fr 1fr; 
        gap: 50px; 
        align-items: center;
    }

    /* Branding Text */
    .brand-section { 
        animation: slideInLeft 1s ease-out;
    }
    
    .brand-section h1 { 
        font-size: 4rem; 
        margin: 0; 
        line-height: 1.1; 
        background: linear-gradient(135deg, #fff 30%, var(--primary));
        -webkit-background-clip: text; 
        -webkit-text-fill-color: transparent; 
        filter: drop-shadow(0 4px 20px rgba(0, 227, 142, 0.3));
    }
    
    .brand-section p { 
        font-size: 1.2rem; 
        color: var(--text-muted); 
        margin-top: 20px; 
        line-height: 1.6;
    }

    /* Highlight Span */
    .highlight { color: var(--primary); font-weight: 600; }

    /* === GLASS CARD === */
    .auth-card { 
        background: var(--glass); 
        backdrop-filter: blur(25px); 
        -webkit-backdrop-filter: blur(25px); 
        border: 1px solid var(--border); 
        border-radius: 30px; 
        padding: 40px 30px; 
        box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.6); 
        position: relative; 
        overflow: hidden; 
        min-height: 550px;
        animation: cardEntry 1s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    /* Moving Glow Orb inside Card */
    .glow-orb { 
        position: absolute; 
        width: 250px; 
        height: 250px; 
        background: radial-gradient(circle, rgba(0, 227, 142, 0.3), transparent 70%); 
        top: -50px; 
        right: -50px; 
        border-radius: 50%; 
        pointer-events: none; 
        animation: pulseOrb 6s infinite alternate;
    }

    @keyframes pulseOrb {
        0% { transform: scale(1); opacity: 0.5; }
        100% { transform: scale(1.3); opacity: 0.8; }
    }

    /* === TABS === */
    .tabs { 
        display: flex; 
        background: rgba(0, 0, 0, 0.3); 
        padding: 6px; 
        border-radius: 18px; 
        margin-bottom: 30px; 
        position: relative; 
        border: 1px solid rgba(255,255,255,0.05);
    }
    
    .tab-btn { 
        flex: 1; 
        padding: 14px; 
        text-align: center; 
        cursor: pointer; 
        color: var(--text-muted); 
        z-index: 2; 
        transition: color 0.3s; 
        font-weight: 600; 
        letter-spacing: 0.5px;
    }
    
    .tab-btn.active { color: #000; }
    
    .tab-indicator { 
        position: absolute; 
        top: 6px; 
        left: 6px; 
        width: calc(50% - 6px); 
        height: calc(100% - 12px); 
        background: linear-gradient(135deg, var(--primary), var(--secondary)); 
        border-radius: 14px; 
        transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
        z-index: 1; 
        box-shadow: 0 4px 15px rgba(0, 227, 142, 0.4);
    }

    /* === FORMS === */
    .forms-wrapper { position: relative; width: 100%; height: 380px; overflow: hidden; }
    
    .form-panel { 
        position: absolute; 
        top: 0; left: 0; width: 100%; 
        transition: all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
        opacity: 0; 
        transform: translateX(120px) scale(0.9); 
        pointer-events: none; 
    }
    
    .form-panel.active { 
        opacity: 1; 
        transform: translateX(0) scale(1); 
        pointer-events: all; 
    }
    
    .form-panel.inactive-left { transform: translateX(-120px) scale(0.9); }

    /* Inputs with Float Animation */
    .input-group { margin-bottom: 22px; position: relative; }
    
    label { 
        display: block; 
        margin-bottom: 8px; 
        font-size: 0.9rem; 
        color: var(--text-muted); 
        margin-left: 5px; 
        transition: color 0.3s;
    }
    
    input { 
        width: 100%; 
        padding: 16px 18px; 
        background: rgba(255, 255, 255, 0.05); 
        border: 2px solid var(--border); 
        border-radius: 16px; 
        color: #fff; 
        font-size: 1rem;
        transition: all 0.3s ease; 
        outline: none; 
    }
    
    input:focus { 
        border-color: var(--primary); 
        background: rgba(255, 255, 255, 0.08); 
        box-shadow: 0 0 20px rgba(0, 227, 142, 0.15);
        transform: translateY(-2px);
    }
    
    input:focus + label { color: var(--primary); }

    /* === SHINY BUTTON === */
    .submit-btn { 
        width: 100%; 
        padding: 18px; 
        border: none; 
        border-radius: 16px; 
        background: linear-gradient(135deg, var(--primary), var(--secondary)); 
        color: #050b14; 
        font-weight: 700; 
        font-size: 1.1rem; 
        cursor: pointer; 
        transition: all 0.3s; 
        margin-top: 15px; 
        position: relative; 
        overflow: hidden; 
        z-index: 1;
        letter-spacing: 0.5px;
    }

    /* Shine Effect */
    .submit-btn::before {
        content: '';
        position: absolute;
        top: 0; left: -100%;
        width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        transition: 0.5s;
        z-index: -1;
    }

    .submit-btn:hover::before { left: 100%; }
    
    .submit-btn:hover { 
        transform: translateY(-4px); 
        box-shadow: 0 15px 30px rgba(0, 227, 142, 0.4); 
    }
    
    .submit-btn:active { transform: scale(0.96); }

    /* Spinner */
    .spinner { 
        display: none; 
        width: 24px; height: 24px; 
        border: 3px solid rgba(0,0,0,0.1); 
        border-radius: 50%; 
        border-top-color: #000; 
        animation: spin 0.8s ease-in-out infinite; 
        margin: 0 auto; 
    }
    
    .submit-btn.loading span { display: none; }
    .submit-btn.loading .spinner { display: block; }
    
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Messages */
    .message { text-align: center; margin-top: 20px; font-size: 0.95rem; min-height: 24px; font-weight: 500; }
    .message.success { color: var(--primary); text-shadow: 0 0 10px rgba(0, 227, 142, 0.4); }
    .message.error { color: var(--danger); text-shadow: 0 0 10px rgba(255, 107, 107, 0.4); }

    /* Entry Animations */
    @keyframes slideInLeft { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } }
    @keyframes cardEntry { from { opacity: 0; transform: translateY(60px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

    /* Responsive */
    @media (max-width: 900px) {
        .container { grid-template-columns: 1fr; gap: 30px; }
        .brand-section { text-align: center; margin-bottom: 10px; }
        .brand-section h1 { font-size: 3rem; }
        .auth-card { min-height: 500px; padding: 30px 20px; }
    }
  </style>
</head>
<body oncontextmenu="return false;"> 

  <div class="floating-veggies">
      <svg class="veg-svg v1" viewBox="0 0 512 512"><path fill="#FF7F50" d="M372 26c-9-9-23-11-34-5l-42 21c-5-7-12-12-21-12-11 0-21 7-25 17L30 357c-13 22-8 51 11 67l44 38c11 10 25 14 39 14 10 0 19-3 28-8l310-220c10-5 13-18 8-28-1-2-3-3-4-5l21-42c6-11 4-25-5-34l-21-21c-3-3-6-5-10-6z"/><path fill="#2E8B57" d="M430 78c-12 0-22 10-22 22 0 4 1 8 3 11l-24 17-17-24c3-2 7-1 11-3 12 0 22-10 22-22s-10-22-22-22c-5 0-10 2-14 5l-20-20c3-4 5-9 5-14 0-12-10-22-22-22s-22 10-22 22c0 5 2 10 5 14l-20 20c-4-3-9-5-14-5-12 0-22 10-22 22s10 22 22 22c4 0 8-1 11-3l17 24 24 17c-2 3-1 7-3 11 0 12 10 22 22 22s22-10 22-22c0-5-2-10-5-14l20-20c4 3 9 5 14 5 12 0 22-10 22-22z"/></svg>
      
      <svg class="veg-svg v2" viewBox="0 0 512 512"><path fill="#2ECC71" d="M256 32C175 32 105 76 74 144c-45 8-80 46-80 94 0 53 43 96 96 96h10c-3 12-5 24-5 36 0 62 72 110 161 110s161-48 161-110c0-12-2-24-5-36h10c53 0 96-43 96-96 0-48-35-86-80-94-31-68-101-112-182-112z"/></svg>
      
      <svg class="veg-svg v3" viewBox="0 0 512 512"><path fill="#FF4757" d="M256 64C132.3 64 32 150 32 256s100.3 192 224 192 224-86 224-192S379.7 64 256 64z"/><path fill="#2ED573" d="M296 98l24-48c-18 6-38 10-64 10s-46-4-64-10l24 48c-12 8-20 20-20 34 0 22 26 40 60 40s60-18 60-40c0-14-8-26-20-34z"/></svg>

      <svg class="veg-svg v4" viewBox="0 0 512 512"><path fill="#8e44ad" d="M365 376c-48 76-155 93-219 53s-67-124-19-200c35-56 79-91 120-99 12 10 26 19 41 26 77 36 109 164 77 220z"/><path fill="#27ae60" d="M272 64c-20 0-38 12-46 30-14-11-30-20-46-26 23-28 60-44 98-37 8 2 15 5 21 10 12-24 42-37 68-30 22 6 36 26 34 46 22-5 46 3 58 21 11 16 9 37-3 51-14 36-54 59-93 54-9-1-18-4-25-8-29 11-64 5-86-16-16-16-18-41-8-61 8-8 18-13 28-16-5-6-5-14 0-18z"/></svg>
      
      <svg class="veg-svg v5" viewBox="0 0 512 512"><path fill="#2ECC71" d="M480 256c-112 0-208 80-224 192 0 0-16-112-224-192 112 0 208-80 224-192 0 0 16 112 224 192z"/></svg>
  </div>

  <div class="container">
    <div class="brand-section">
      <h1>Fresh<br>Vegetable<br><span class="highlight">Market</span></h1>
      <p>Khet se seedha aapke ghar tak. <br>Best quality <b>organic sabziyan</b>, bas ek click door.</p>
    </div>

    <div class="auth-card">
      <div class="glow-orb"></div>
      
      <div class="tabs">
        <div class="tab-indicator" id="indicator"></div>
        <div class="tab-btn active" onclick="switchTab('login')">Login</div>
        <div class="tab-btn" onclick="switchTab('signup')">Signup</div>
      </div>

      <div class="forms-wrapper">
        <div class="form-panel active" id="login-panel">
          <form onsubmit="handleLogin(event)">
            <div class="input-group">
              <label>Email Address</label>
              <input type="email" id="login-email" required>
            </div>
            <div class="input-group">
              <label>Password</label>
              <input type="password" id="login-password" required>
            </div>
            <button type="submit" class="submit-btn" id="btn-login">
                <span>Login Securely</span>
                <div class="spinner"></div>
            </button>
            <div class="message" id="login-msg"></div>
          </form>
        </div>

        <div class="form-panel" id="signup-panel">
          <form onsubmit="handleSignup(event)">
            <div class="input-group">
              <label>Full Name</label>
              <input type="text" id="signup-name" required>
            </div>
            <div class="input-group">
              <label>Phone Number</label>
              <input type="tel" id="signup-phone" required>
            </div>
            <div class="input-group">
              <label>Set Password</label>
              <input type="password" id="signup-pass" required>
            </div>
            <button type="submit" class="submit-btn" id="btn-signup">
                <span>Create Account</span>
                <div class="spinner"></div>
            </button>
            <div class="message" id="signup-msg"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    const loginPanel = document.getElementById('login-panel');
    const signupPanel = document.getElementById('signup-panel');
    const indicator = document.getElementById('indicator');
    const tabs = document.querySelectorAll('.tab-btn');

    // === UI LOGIC: SMOOTH TABS ===
    function switchTab(tab) {
        if (tab === 'login') {
            indicator.style.transform = 'translateX(0)';
            tabs[0].classList.add('active');
            tabs[1].classList.remove('active');
            
            loginPanel.classList.add('active');
            loginPanel.classList.remove('inactive-left');
            
            signupPanel.classList.remove('active');
            signupPanel.classList.remove('inactive-left');
        } else {
            indicator.style.transform = 'translateX(100%)';
            tabs[0].classList.remove('active');
            tabs[1].classList.add('active');

            loginPanel.classList.remove('active');
            loginPanel.classList.add('inactive-left');
            
            signupPanel.classList.add('active');
        }
        // Clear old messages
        document.getElementById('login-msg').textContent = '';
        document.getElementById('signup-msg').textContent = '';
    }

    // === BACKEND INTEGRATION ===
    async function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const btn = document.getElementById('btn-login');
        const msg = document.getElementById('login-msg');
        
        btn.classList.add('loading');
        msg.textContent = '';

        try {
            // Vercel Serverless Function Call
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (response.ok && data.success) {
                msg.className = 'message success';
                msg.textContent = 'Login Successful! Redirecting...';
                
                // Save user data (optional) and redirect
                // localStorage.setItem('user', JSON.stringify(data.user));
                setTimeout(() => {
                    alert(`Welcome back, ${data.user.full_name}! Balance: â‚¹${data.user.wallet_balance}`);
                    // window.location.href = '/dashboard.html';
                }, 1000);

            } else {
                throw new Error(data.message || 'Invalid Credentials');
            }

        } catch (error) {
            msg.className = 'message error';
            msg.textContent = error.message;
        } finally {
            btn.classList.remove('loading');
        }
    }

    // Signup Placeholder
    async function handleSignup(e) {
        e.preventDefault();
        alert("Signup API is currently under maintenance. Please use Login.");
    }

    // === ANTI-THEFT & SECURITY ===
    // Disable Inspect Element & Keyboard Shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.keyCode == 123 || // F12
           (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0))) || 
           (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0))) {
            e.preventDefault();
            return false;
        }
    });

    // Disable Right Click
    document.addEventListener('contextmenu', event => event.preventDefault());
  </script>
</body>
</html>