<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fresh Vegetable Market | Auth</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#0f2027;
--bg2:#203a43;
--primary:#00e38e;
--secondary:#7cffb2;
--danger:#ff6b6b;
--glass:rgba(255,255,255,0.08);
--border:rgba(255,255,255,0.15);
--text:#fff;
--muted:#b8c7c0;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
font-family:'Poppins',sans-serif;
background:radial-gradient(circle at 10% 20%,var(--bg),var(--bg2));
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
padding:15px;
color:var(--text);
}

.container{
width:100%;
max-width:1000px;
display:grid;
grid-template-columns:1fr 1fr;
gap:40px;
align-items:center;
}

.brand h1{
font-size:3.5rem;
line-height:1.1;
background:linear-gradient(135deg,#fff 30%,var(--primary));
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.brand p{
margin-top:20px;
color:var(--muted);
line-height:1.6;
}

.auth-card{
background:var(--glass);
backdrop-filter:blur(20px);
border:1px solid var(--border);
border-radius:25px;
padding:35px 25px;
position:relative;
}

.tabs{
display:flex;
background:rgba(0,0,0,0.3);
border-radius:15px;
padding:5px;
margin-bottom:25px;
position:relative;
}

.tab-btn{
flex:1;
text-align:center;
padding:12px;
cursor:pointer;
font-weight:600;
z-index:2;
color:var(--muted);
}

.tab-btn.active{
color:#000;
}

.tab-indicator{
position:absolute;
top:5px;
left:5px;
width:calc(50% - 5px);
height:calc(100% - 10px);
background:linear-gradient(135deg,var(--primary),var(--secondary));
border-radius:12px;
transition:0.3s;
}

.form-panel{
display:none;
}

.form-panel.active{
display:block;
}

.input-group{
margin-bottom:18px;
}

label{
display:block;
margin-bottom:6px;
font-size:0.9rem;
color:var(--muted);
}

input{
width:100%;
padding:14px;
border-radius:12px;
border:2px solid var(--border);
background:rgba(255,255,255,0.05);
color:#fff;
font-size:1rem;
outline:none;
transition:0.3s;
}

input:focus{
border-color:var(--primary);
box-shadow:0 0 10px rgba(0,227,142,0.2);
}

button{
width:100%;
padding:15px;
border:none;
border-radius:12px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
font-weight:700;
cursor:pointer;
margin-top:10px;
}

button:disabled{
opacity:0.7;
cursor:not-allowed;
}

.message{
margin-top:15px;
text-align:center;
font-size:0.9rem;
min-height:20px;
}

.success{color:var(--primary)}
.error{color:var(--danger)}

/* Mobile */
@media(max-width:850px){
.container{
grid-template-columns:1fr;
text-align:center;
}
.brand h1{
font-size:2.5rem;
}
}
</style>
</head>
<body>

<div class="container">

<div class="brand">
<h1>Fresh Vegetable Market</h1>
<p>Khet se seedha ghar tak. Organic sabziyan trusted quality ke saath.</p>
</div>

<div class="auth-card">

<div class="tabs">
<div class="tab-indicator" id="indicator"></div>
<div class="tab-btn active" onclick="switchTab('login')">Login</div>
<div class="tab-btn" onclick="switchTab('signup')">Signup</div>
</div>

<!-- LOGIN -->
<div class="form-panel active" id="login-panel">
<form id="loginForm">
<div class="input-group">
<label>Email</label>
<input type="email" id="login-email" required>
</div>
<div class="input-group">
<label>Password</label>
<input type="password" id="login-password" required>
</div>
<button type="submit" id="loginBtn">Login</button>
<div class="message" id="login-msg"></div>
</form>
</div>

<!-- SIGNUP -->
<div class="form-panel" id="signup-panel">
<form id="signupForm">
<div class="input-group">
<label>Full Name</label>
<input type="text" id="signup-name" required>
</div>
<div class="input-group">
<label>Email</label>
<input type="email" id="signup-email" required>
</div>
<div class="input-group">
<label>Phone</label>
<input type="tel" id="signup-phone" required>
</div>
<div class="input-group">
<label>Password</label>
<input type="password" id="signup-password" required>
</div>
<button type="submit" id="signupBtn">Create Account</button>
<div class="message" id="signup-msg"></div>
</form>
</div>

</div>
</div>

<script>
const indicator=document.getElementById("indicator");
const tabs=document.querySelectorAll(".tab-btn");
const loginPanel=document.getElementById("login-panel");
const signupPanel=document.getElementById("signup-panel");

function switchTab(tab){
if(tab==="login"){
indicator.style.transform="translateX(0)";
tabs[0].classList.add("active");
tabs[1].classList.remove("active");
loginPanel.classList.add("active");
signupPanel.classList.remove("active");
}else{
indicator.style.transform="translateX(100%)";
tabs[1].classList.add("active");
tabs[0].classList.remove("active");
signupPanel.classList.add("active");
loginPanel.classList.remove("active");
}
clearMessages();
}

function clearMessages(){
document.getElementById("login-msg").textContent="";
document.getElementById("signup-msg").textContent="";
}

/* LOGIN */
document.getElementById("loginForm").addEventListener("submit",async(e)=>{
e.preventDefault();
const btn=document.getElementById("loginBtn");
const msg=document.getElementById("login-msg");
btn.disabled=true;
msg.textContent="Processing...";

try{
const res=await fetch("/api/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
email:document.getElementById("login-email").value.trim(),
password:document.getElementById("login-password").value
})
});

const data=await res.json();

if(res.ok && data.success){
msg.className="message success";
msg.textContent="Login successful!";
localStorage.setItem("user",JSON.stringify(data.user));
setTimeout(()=>{window.location.href="/dashboard.html";},1000);
}else{
throw new Error(data.message);
}

}catch(err){
msg.className="message error";
msg.textContent=err.message;
}
btn.disabled=false;
});

/* SIGNUP */
document.getElementById("signupForm").addEventListener("submit",async(e)=>{
e.preventDefault();
const btn=document.getElementById("signupBtn");
const msg=document.getElementById("signup-msg");
btn.disabled=true;
msg.textContent="Creating account...";

try{
const res=await fetch("/api/signup",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
full_name:document.getElementById("signup-name").value.trim(),
email:document.getElementById("signup-email").value.trim(),
phone:document.getElementById("signup-phone").value.trim(),
password:document.getElementById("signup-password").value
})
});

const data=await res.json();

if(res.ok && data.success){
msg.className="message success";
msg.textContent="Account created successfully!";
setTimeout(()=>{switchTab("login");},1000);
}else{
throw new Error(data.message);
}

}catch(err){
msg.className="message error";
msg.textContent=err.message;
}
btn.disabled=false;
});
</script>

</body>
</html>
